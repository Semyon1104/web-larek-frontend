# Проектная работа "Веб-ларек"

**«Веб-ларёк»** — это интернет-магазин для веб-разработчиков, позволяющий просматривать каталог товаров, добавлять товары в корзину и оформлять заказы. Проект реализуется с использованием паттерна MVP (Model-View-Presenter), что обеспечивает четкое разделение ответственности между компонентами приложения.

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Компоненты архитектуры
### Слой данных (Model)
В слое данных определяются типы, описывающие как данные, получаемые от сервера, так и внутренние доменные модели, которые будут использоваться в приложении. Для этого выделяются следующие группы типов:

#### API-модели
Эти типы соответствуют формату данных, получаемых от сервера:

**ApiProduct**
```
export type ApiProduct = {
    id: string;
    title: string;
    description: string;
    image: string;
    category: string;
    price: number | null;
};
```
Описание: Объект товара, возвращаемый сервером. Поля включают идентификатор, заголовок, описание, ссылку на изображение, категорию и цену (цена может быть null, если товар «бесценный»).

**ApiProductList**
```
export type ApiProductList = {
    total: number;
    items: ApiProduct[];
};
```
Описание: Объект, содержащий общее количество товаров и массив объектов типа ApiProduct.

**ApiOrderResponse**
```
export type ApiOrderResponse = {
    id: string;
    total: number;
};
```
Описание: Ответ сервера при оформлении заказа, содержащий идентификатор заказа и итоговую сумму.

**ApiErrorResponse**
```
export type ApiErrorResponse = {
    error: string;
};
```
Описание: Универсальный тип для обработки ошибок, возвращаемых сервером (например, «NotFound» или «Неверная сумма заказа»).

### Доменные модели
Эти типы представляют данные внутри приложения и используются презентером и представлением (View):

**Product**
```
export type Product = {
    id: string;
    title: string;
    details: string;
    image: string;
    category: string;
    price: number | null;
};
```
Описание: Доменная модель товара, где поле description переименовано в details для лучшего соответствия терминологии приложения.

**CartItem**
```
export type CartItem = {
    product: Product;
    quantity: number;
};
```
Описание: Элемент корзины, содержащий товар и количество единиц.

**Cart**
```
export type Cart = {
    items: CartItem[];
};
```
Описание: Корзина пользователя, состоящая из массива элементов CartItem.

**Order**
```
export type Order = {
    id: string;
    items: CartItem[];
    total: number;
    paymentMethod: "online" | "cash" | "card";
    address: string;
};
```
Описание: Заказ, оформляемый пользователем, включает список товаров, общую сумму, способ оплаты (например, online, cash или card) и адрес доставки.

**User**
```
export type User = {
    id: string;
    email: string;
    phone: string;
};
```
Описание: Модель пользователя, содержащая идентификатор, email и телефон.

### Трансформация данных
Для изоляции изменений на стороне API от бизнес-логики проекта используются функции преобразования данных. Они отвечают за трансформацию API-моделей в доменные модели, удобные для работы в приложении.

**transformProduct**
```
export const transformProduct = (apiProduct: ApiProduct): Product => ({
    id: apiProduct.id,
    title: apiProduct.title,
    details: apiProduct.description,
    image: apiProduct.image,
    category: apiProduct.category,
    price: apiProduct.price,
});
```
Описание: Функция преобразует объект ApiProduct в объект Product.

### Слой представления (View)
На текущем этапе проекта основное внимание уделено типизации и модели данных. В будущем в слое представления будут реализованы компоненты, отвечающие за отрисовку каталога товаров, корзины, формы заказа и сообщений об успешном оформлении покупки. Все взаимодействия с интерфейсом будут происходить через классы представления, реализующие методы отображения и обновления UI.

### Слой презентера (Presenter)
Презентеры будут отвечать за:

Получение данных через API-клиент.
Преобразование данных с использованием mapper-функций.
Обработку событий от пользователя (например, добавление товара в корзину, оформление заказа).
Вызов методов представления для обновления UI.
На данном этапе архитектура MVP ещё не завершена, но подготовленные типы данных закладывают основу для дальнейшей реализации презентеров и взаимодействия между слоями.
