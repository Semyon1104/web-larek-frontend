# Проектная работа «Веб-ларек»

## Используемые технологии:

- HTML
- SCSS
- TS
- Webpack
- ООП

## Установка и запуск проекта

1. npm install
2. npm run start

## Подробное описание проекта

В данном проекте применяется событийно-ориентированная архитектура, в которой взаимодействие между различными компонентами реализуется посредством передачи сообщений, инициируемых определёнными событиями. Такой подход позволяет добиться гибкости, модульности и упрощает поддержку и расширение функционала, поскольку компоненты взаимодействуют не напрямую, а через механизм событий.

В дополнение к этому, структура проекта основана на архитектурном шаблоне MVP (Model-View-Presenter), который способствует разделению ответственности между различными уровнями приложения. 

* Модель (Model) отвечает за управление данными, обработку бизнес-логики и взаимодействие с внешними сервисами, такими как API. В данном проекте это реализуется через объект AppData, который хранит и управляет состоянием каталога, корзины и заказа.
* Представление (View) формирует пользовательский интерфейс и отображает данные, полученные от модели. Оно не содержит бизнес-логики и реагирует исключительно на изменения данных и команды от презентатора. В данном случае, Page, Modal, Basket и другие UI-компоненты реализуют этот слой.
* Презентатор (Presenter) является связующим звеном между моделью и представлением. Он получает события от пользовательского интерфейса, обрабатывает их, изменяет состояние модели и обновляет представление. В проекте эта роль реализуется через объект EventEmitter, который координирует взаимодействие между компонентами, а также через слушатели событий, выполняющие логику обновления данных и интерфейса.

### Базовый код

### **Класс `Model<T>`**

Абстрактный дженерик класс, объединяющий конструктор и метод для привязки событий.

**Конструктор:**
- Принимает объект данных неопределённого типа и объект события типа **IEvents**.
- Выполняет слияние входящих данных с родительскими.

**Методы:**
- **emitChanges** — регистрирует событие в **EventEmitter**.

---

### **Класс `Component<T>`**

Абстрактный дженерик класс, который обрабатывает компоненты отображения.

**Конструктор:**
- Принимает **container** типа **HTMLElement**.

**Методы:**
- **updateClass** — переключает CSS класс элемента.
- **setDisabledState** — блокирует элемент (например, кнопку).
- **updateTextContent** — изменяет текстовое содержимое элемента.
- **updateImage** — изменяет изображение и его атрибут alt.
- **render** — объединяет входящие данные и отрисовывает элемент.

---

### **Класс `EventEmitter`**

Класс для работы с событиями. Обеспечивает установку и удаление слушателей событий, а также вызов слушателей при возникновении события.

---

### **Класс `Api`**

Класс для работы с сервером.

**Конструктор:**
- Принимает **baseUrl** и **options** для настройки запросов.

**Методы:**
- Обрабатывает запросы и ответы, отправляет и получает данные.

---

## **Компоненты модели данных (Model)**

### **Класс `ProductApi`**

Основной класс для работы с сервером в проекте. Наследуется от базового класса **Api**.

**Конструктор:**
- Передает **baseUrl** и **options** в родительский конструктор.
- Сохраняет **cdn_url** для запросов.

**Методы:**
- **getCatalog** — получает список товаров с сервера.
- **order** — отправляет заказ на сервер.

### **Класс `AppData`**

Модель данных всего приложения. Управляет данными, такими как каталог, превью товаров, корзина и форма заказа.

Наследуется от абстрактного класса **Model<T>**, реализующего интерфейс **IServiceElems**.

**Поля:**
- **catalog** — данные каталога товаров.
- **preview** — данные товара, отображаемого в превью.
- **basket** — товары, добавленные в корзину.
- **order** — данные заказа.
- **formErrors** — ошибки валидации.

**Методы:**
- **clearBasket** — очищает корзину.
- **addToOrder** — добавляет товар в заказ.
- **removeFromOrder** — удаляет товар из заказа.
- **setCatalog** — обновляет каталог товаров.
- **setPreview** — обновляет данные для превью товара.
- **setProductToBasket** — добавляет товар в корзину.
- **removeProductToBasket** — удаляет товар из корзины.
- **get statusBasket** — получает статус корзины.
- **get bskt** — возвращает товары в корзине.
- **set total** — устанавливает сумму корзины.
- **getTotal** — получает сумму корзины.
- **setOrderField** — устанавливает поле в заказе.
- **setContactsField** — устанавливает контактные данные.
- **validateOrder** — проводит валидацию данных заказа.
- **validateContacts** — проводит валидацию контактных данных.

### **Класс `Product`**

Модель, хранящая данные о товаре, такие как идентификатор, название, описание, категория, изображение и цена.

Наследуется от абстрактного класса **Model<T>**, реализующего интерфейс **IProduct**.

**Поля:**
- **id** — идентификатор товара.
- **title** — название товара.
- **description** — описание товара.
- **category** — категория товара.
- **image** — изображение товара.
- **price** — цена товара.

---

## **Компоненты представления (View)**

### **Класс `Card`**

Компонент для отображения карточки товара в каталоге.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и необязательный объект событий **actions** типа **ICardActions**.

**Поля:**
- **_title** — разметка заголовка карточки.
- **_category** — разметка категории товара.
- **_image** — разметка изображения товара.
- **_price** — разметка цены товара.
- **_categoryColor** — словарь для изменения класса категории.

**Методы:**
- **set title** — устанавливает содержимое заголовка.
- **set category** — устанавливает категорию.
- **set image** — устанавливает изображение.
- **set price** — устанавливает цену.

### **Класс `CardPreview`**

Компонент для отображения превью товара.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и необязательный объект **actions** типа **ICardActions**.

**Поля:**
- **_text** — разметка описания превью.
- **_button** — кнопка для действия с превью.

**Методы:**
- **set text** — устанавливает описание превью.

### **Класс `CardBasket`**

Компонент для отображения карточки товара в корзине.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и необязательный объект **actions** типа **ICardActions**.

**Поля:**
- **_title** — разметка заголовка карточки товара.
- **_button** — кнопка для удаления товара.
- **_price** — разметка цены товара.
- **_index** — порядковый номер товара.

**Методы:**
- **set title** — устанавливает название товара.
- **set index** — устанавливает порядковый номер.
- **set price** — устанавливает цену.

### **Класс `Page`**

Компонент для отображения страницы с каталогом и корзиной.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект события **IEvent**.

**Поля:**
- **_counter** — разметка для счетчика товаров в корзине.
- **_catalog** — разметка для каталога товаров.
- **_wrapper** — разметка обертки страницы.
- **_basket** — кнопка для перехода в корзину.

**Методы:**
- **set counter** — устанавливает количество товаров в корзине.
- **set catalog** — обновляет каталог товаров.
- **set locked** — блокирует прокрутку страницы при открытии модалки.

### **Класс `Modal`**

Компонент для отображения модального окна.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект события **IEvent**.

**Поля:**
- **_closeButton** — кнопка для закрытия модального окна.
- **_content** — контейнер для контента модального окна.

**Методы:**
- **set content** — устанавливает контент для модального окна.
- **open** — открывает окно.
- **close** — закрывает окно.
- **render** — отрисовывает окно и контент.

### **Класс `Basket`**

Компонент для отображения корзины в модальном окне.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект события **IEvent**.

**Поля:**
- **itemList** — разметка списка товаров.
- **totalPrice** — разметка для суммы товаров.
- **actionButton** — кнопка для перехода к оформлению заказа.
- **items** — список товаров в корзине.

**Методы:**
- **set items** — обновляет список товаров.
- **set total** — обновляет общую сумму товаров.

### **Класс `Order`**

Компонент для отображения первого шага оформления заказа.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект события **IEvent**.

**Методы:**
- **set payment** — активирует кнопку выбора способа оплаты.
- **set address** — обновляет поле для ввода адреса.

### **Класс `Contacts`**

Компонент для отображения второго шага заказа с контактными данными.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект события **IEvent**.

**Методы:**
- **set phone** — обновляет поле для ввода телефона.
- **set email** — обновляет поле для ввода email.

### **Класс `Form<T>`**

Дженерик класс для работы с формой и её валидацией.

**Конструктор:**
- Принимает **container** типа **HTMLElement** и объект **IEvent**.

**Методы:**
- **set name** — обновляет поле для имени.
- **set email** — обновляет поле для email.
- **set phone** — обновляет поле для телефона.
- **validate** — валидирует данные формы.
